# 备份

<!-- toc -->

## 自动备份

Anki 会自动创建你的卡片数据的备份。这些数据包括卡片上的文本和进程信息，但不包括声音或图像文件。

自动备份可以帮助你从错误中恢复，但你不应仅依赖于它们。因为它们存储在你的本地设备上，如果你的设备损坏
或丢失，它们无法保护你。我们建议你将它们与[手动备份](#手动-colpkg-备份)结合使用。

### 恢复

要从自动备份中恢复：

- 打开 Anki，并从文件菜单中选择切换配置文件。
- 点击「打开备份」按钮。
- 选择你希望恢复的备份。

从备份中恢复时，自备份创建以来的任何更改都将丢失。

当你从备份中恢复时，Anki 会禁用自动同步和备份。一旦你确认已正确恢复了备份，关闭并重新打开 Anki 以恢
复正常。

### Anki 2.1.50+

备份会定期创建。你可以在[偏好设置](preferences.md)界面中配置备份间的时间。默认是 30 分钟。

某些操作即使在设定时间未到之前，也会触发备份：

- 单向同步下载
- 使用文件 > 导入导入 .colpkg 文件
- 工具 > 检查数据库

当备份超过两天时，Anki 将开始删除一些较旧的备份。你可以控制希望保留多少每日、每周和每月的备份。

使用 2.1.50 创建的备份无法导入到较旧的 Anki 版本中。

### 较旧的 Anki 版本

每当你的集合关闭时（关闭 Anki、切换配置文件或进行完整的同步下载时），Anki 会创建一个备份。默认情况下
它会保存最多 30 个备份；你可以在[偏好设置](preferences.md)中进行调整。

## 手动 colpkg 备份

### 恢复

你可以通过使用`文件 > 导入`从手动备份中恢复。

### 创建

在 Anki 2.1.50+ 中，你可以使用`文件 > 创建备份`来触发立即备份。这就像普通的自动备份一样，不包括媒体
文件。

要创建包含你的声音和图像的备份：

- 从文件菜单中选择导出。
- 确保选择「Anki 集合文件 (.colpkg)」。
- 启用「包含媒体文件」选项。

这将创建一个包含你所有卡片及其使用的任何声音/图像的 .colpkg 文件。我们建议你将文件存放在安全的地方，
比如其他设备，或者像 Dropbox 或 Google Drive 这样的基于云的文件存储服务。

## AnkiWeb

将你的集合与 AnkiWeb [同步](./syncing.md)提供了一定程度的保护，以防设备丢失或被盗。如果你需要从
AnkiWeb 恢复你的集合，可以在偏好设置屏幕中强制执行单向同步，或从新设备同步，然后选择「下载」。

## 删除日志

Anki 将删除的笔记记录到你的配置文件文件夹中的一个名为 deleted.txt 的文本文件中。这些笔记采用文本格
式，可以通过文件 > 导入读取，但请注意导入功能一次仅支持单一笔记类型，因此如果你删除了不同笔记类型的
笔记，你需要先将文件分成不同笔记类型的文件。
