# 检查与错误

> 原
> 文：[Checks and Errors - Anki Manual (ankiweb.net)](https://docs.ankiweb.net/templates/errors.html)

<!-- toc -->

当你保存一个笔记模板或导出一个牌组时，Anki 2.1.45+ 会检查一些常见错误。这些错误会在之后当任何人学习
受影响的卡片时引发问题，因此在你修复这些错误之前，Anki 不会让你继续操作。

## 基础

在阅读以下内容之前，请参阅[关键概念](../getting-started.md#关键概念)。

下面的大多数错误都需要你修改你的笔记模板/卡片模板。要执行此操作：

- 打开浏览界面，并查看左侧的项目。
- 找到错误消息中提到的笔记模板。如果需要，你可以使用左上角的搜索栏。
- 点击笔记模板，以在右侧显示其卡片/笔记。
- 点击编辑区域顶部的「卡片…」按钮，打开[模板界面](./intro.md#模板界面)。

## 特定问题

### 模板语法错误

这表示你错误地使用了[字段替换](./fields.md)语法。

你可以通过访问卡片模板界面来修正模板中的错误。具体操作如下：

- 在电脑版 Anki 中：首先编辑一张存在问题的卡片，然后点击界面上的「卡片…」按钮。
- 在 Anki Mobile（iOS 版 Anki）中：在复习界面查看有问题的卡片时，点击右上角的设置图标（齿轮形状），
  然后选择「卡片模板」选项。

需要注意的是，当你修正模板中的一个错误后，使用该模板的所有卡片都会自动更新。这意味着你无需为每张使用
相同模板的卡片重复进行相同的修改，大大节省了时间和精力。

至于具体需要修改的内容，这将取决于你遇到的具体错误提示。请仔细阅读错误信息，根据提示进行相应的修改。

**已找到「{{字段}}」，但字段「字段」不存在。**

这表明你的模板中包含了一个不存在的字段名称。要修复此问题，请在卡片模板中找到 {{字段}} 并将其删除。

**「{{字段」中缺少「}}」**

当模板中找到了 {{ 但没有无匹配的 }} 时，会显示此消息。例如，如果你有

```
{{字段
```

则需要更改为

```
{{字段}}
```

**缺少「{{/字段}}」**

这意味着 Anki 在卡片模板中找到了 `{{#字段}}` 或 `{{^字段}}`，但没有匹配的 `{{/字段}}`。从模板中移除
`{{#字段}}` 或 `{{^字段}}` 会修复此错误。

**已找到「{{/字段1}}」，但需要「{{/字段2}}」**

条件替换需要按照打开的顺序关闭。例如，下面的模板是不正确的：

```
{{#字段1}}
  {{#字段2}}
    {{字段3}}
  {{/字段1}}
{{/字段2}}
```

为了修正此问题，模板应更改为：

```
{{#字段1}}
  {{#字段2}}
    {{字段3}}
  {{/字段2}}
{{/字段1}}
```

**已找到「{{/字段}}」，但缺少「{{#字段}}」或「{{^字段}}」**

闭合标签必须由打开标签匹配。例如，以下是无效的，因为开头没有 `{{#字段2}}` 或 `{{^字段2}}`：

```
  {{字段}}
{{/字段2}}
```

可以通过移除闭合标签来修复：

```
{{字段}}
```

### 相同的正面

这表示你将 Anki 配置成了为每个输入创建两个相同的问题。如果你添加了一个新卡片模板而没有对其进行任何调
整，则可能发生这种情况。相同的卡片会加倍你的工作量，并降低 Anki 的调度效率。

要解决此问题，请打开[模板界面](./intro.md#模板界面)，并在顶部选择一个重复的。然后使用右上方的按钮删
除所选的卡片模板。这将删除所有使用该卡片模板的重复卡片/笔记。

### 卡片正面显示为空白

<div id="no-field-replacement-on-front-side" />

Anki 通过将你输入的内容与预设的模板结合来生成卡片，模板决定了哪些内容应该出现在卡片的正面和背面。如
果你收到提示说卡片正面是空白的，通常有两种可能：

1. 你的正面模板中包含的所有字段都没有填写内容。
2. 你有填写了内容的字段，但这些字段没有被添加到正面模板中。

要解决这个问题，请按以下步骤操作：

1. 在电脑版 Anki 中编辑有问题的卡片。
2. 点击「卡片…」按钮。
3. 检查并确保至少有一个含有内容的字段被添加到了正面模板中。
4. 如果需要，可以使用「添加字段」按钮来增加新的字段。

特别注意事项：

- 如果你使用的是填空题模板的笔记，请确保你在文本字段中至少添加了一个挖空，例
  如：{{c1::这是一个挖空示例}}。
- 如果你正在使用输入答案的功能，请确保你在正面模板中不仅添加了答案字段，还添加了其他字段。

### 填空题笔记模板缺少挖空过滤器

<div id="no-cloze-filter-on-cloze-notetype" />

填空题笔记的正面和背面模板都应该包含一个[挖空](../editing.md#填空题)过滤器。这个过滤器是创建挖空卡片
的关键元素。如果你发现模板中缺少这个过滤器，需要将其添加回来，以确保 Anki 能正确创建和显示挖空卡片。

#### 单个空卡片

在制作挖空时，每个挖空编号会被转换为一张独立的卡片。例如，以下内容将创建三张卡片：

```
{{c1::这}}是一个{{c2::示例}}{{c3::句子}}。
```

如果你稍后编辑文本，移除或更改挖空编号，之前创建的卡片可能会变得空白。例如：

```
{{c1::这}}是一个{{c2::示例}}
```

和

```
{{c1::这}}是一个{{c2::示例}}{{c1::句子}}。
```

这两种更改都会使第 3 张卡片变为空白。当你查看第 3 张卡片时，你会看到一条消息，指示卡片是空卡片，并可
使用空卡片功能进行清理。你可以通过电脑版本主窗口的工具菜单访问该功能，并用它来移除空卡片。在操作前，
请先检查报告的空卡片，如果不确定，请通过 文件 > 导出 菜单项创建一个备份。

#### 所有填空卡片均为空

如果你不小心修改了卡片模板，可能会导致所有的挖空内容无法显示。如果发生这种情况，请编辑一个有问题的卡
片，并记下第一个字段的名称——通常被称为「文字」。然后，请：

- 点击「卡片…」按钮
- 将正面文本替换为

  ```
  {{cloze:文字}}
  ```

- 将背面文本替换为相同内容。

如果你的字段被称为其他名称，请将 文字 替换为该字段的名称。
